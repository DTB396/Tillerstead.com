{%- assign phases = site.data.build_phases | sort: "order" -%}
{%- assign here = page.url | append: "" -%}

<nav class="build-sidenav" aria-label="Build Phase Guides">
  <div class="build-sidenav__head">
    <a class="build-sidenav__hub" href="{{ '/build/' | relative_url }}">
      Build Phase Guides
    </a>
  </div>

  <ol class="build-sidenav__list">
    {%- for p in phases -%}
      {%- assign p_url = p.url | relative_url -%}
      {%- assign is_active = (here == p.url) or (here == p_url) -%}
      <li class="build-sidenav__item">
        <a class="build-sidenav__link{% if is_active %} is-active{% endif %}" href="{{ p_url }}">
          <span class="build-sidenav__num">{{ p.order }}</span>
          <span class="build-sidenav__title">{{ p.title }}</span>
        </a>
      </li>
    {%- endfor -%}
  </ol>
</nav>