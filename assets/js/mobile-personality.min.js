(()=>{class r{constructor(){this.init()}init(){this.addDelightfulDetails(),this.addPersuasiveElements(),this.addPremiumTouches(),this.addPlayfulEasterEggs()}addDelightfulDetails(){this.addSuccessConfetti(),this.addEmojiReactions(),this.addLoadingPersonality(),this.addMilestoneToasts()}addSuccessConfetti(){document.addEventListener("submit",e=>{e.target.matches("form")&&setTimeout(()=>{this.throwConfetti(),this.showSuccessToast(`\u{1F389} Amazing! We'll get back to you faster than you can say "perfectly level tile"!`),window.haptics&&window.haptics.trigger("success")},500)})}throwConfetti(){const e=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6"];for(let o=0;o<50;o++){const s=document.createElement("div");s.className="confetti",s.style.left=Math.random()*100+"vw",s.style.backgroundColor=e[Math.floor(Math.random()*e.length)],s.style.animationDelay=Math.random()*.5+"s",s.style.animationDuration=Math.random()*2+2+"s",document.body.appendChild(s),setTimeout(()=>s.remove(),4e3)}}addEmojiReactions(){document.querySelectorAll(".portfolio-item img, .gallery-item img").forEach(t=>{let o=0,s;t.addEventListener("click",i=>{o++,clearTimeout(s),o===2?(this.showEmojiReaction(i.clientX,i.clientY,"\u2764\uFE0F"),window.haptics&&window.haptics.trigger("medium"),o=0):s=setTimeout(()=>{o=0},300)})})}showEmojiReaction(e,t,o){const s=document.createElement("div");s.className="emoji-reaction",s.textContent=o,s.style.left=e+"px",s.style.top=t+"px",document.body.appendChild(s),setTimeout(()=>s.remove(),1e3)}addLoadingPersonality(){var o,s;const e=["\u{1F528} Crafting the perfect experience...","\u{1F3D7}\uFE0F Building something amazing...","\u2728 Making magic happen...","\u{1F3AF} Laser-leveling this page...","\u{1F9E9} Setting tiles perfectly in place...","\u{1F48E} Polishing to perfection...","\u{1F680} Almost there, faster than grouting!"];(s=(o=window.MobileAppFeatures)==null?void 0:o.prototype)!=null&&s.showPageTransition&&(window.MobileAppFeatures.prototype.showPageTransition=function(){const i=document.createElement("div");i.className="page-transition-overlay";const a=e[Math.floor(Math.random()*e.length)];i.innerHTML=`
          <div class="page-transition-spinner">
            <div class="loading-message">${a}</div>
            <div class="dot-loader">
              <span></span><span></span><span></span>
            </div>
          </div>
        `,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&(i.classList.add("fade-out"),setTimeout(()=>i.remove(),300))},5e3)})}addMilestoneToasts(){const e=new Set(JSON.parse(localStorage.getItem("tillerstead-visited-pages")||"[]"));e.add(window.location.pathname),localStorage.setItem("tillerstead-visited-pages",JSON.stringify([...e]));const t={3:{emoji:"\u{1F3AF}",message:"Explorer! You've checked out 3 pages. Like what you see?"},5:{emoji:"\u{1F31F}",message:"Wow! 5 pages visited. You're serious about quality tile work!"},10:{emoji:"\u{1F3C6}",message:"Champion browser! Ready to start your project?"}};t[e.size]&&setTimeout(()=>{this.showMilestoneToast(t[e.size])},2e3)}showMilestoneToast({emoji:e,message:t}){const o=document.createElement("div");o.className="milestone-toast",o.innerHTML=`
      <span class="milestone-emoji">${e}</span>
      <span class="milestone-message">${t}</span>
    `,document.body.appendChild(o),setTimeout(()=>o.classList.add("show"),100),window.haptics&&window.haptics.trigger("success"),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>o.remove(),300)},5e3)}addPersuasiveElements(){this.addSocialProofPulse(),this.addAvailabilityIndicator(),this.addTrustBadges(),this.addProgressiveCTAs()}addSocialProofPulse(){document.querySelectorAll("[data-review], .review-card, .testimonial-card").forEach((t,o)=>{setTimeout(()=>{t.classList.add("social-proof-pulse"),setTimeout(()=>t.classList.remove("social-proof-pulse"),1e3)},o*2e3)})}addAvailabilityIndicator(){const t=new Date().toLocaleDateString("en-US",{month:"long"}),o=document.createElement("div");o.className="availability-indicator",o.innerHTML=`
      <span class="availability-dot"></span>
      <span class="availability-text">Scheduling ${t} projects now</span>
    `;const s=document.querySelector(".mobile-fab");s&&s.insertAdjacentElement("beforebegin",o)}addTrustBadges(){let e=0;window.addEventListener("scroll",()=>{const t=document.documentElement.scrollHeight-window.innerHeight;e=window.scrollY/t*100,e>50&&!document.querySelector(".trust-badge-float")&&this.showFloatingTrustBadge()},{passive:!0})}showFloatingTrustBadge(){const e=document.createElement("div");e.className="trust-badge-float",e.innerHTML=`
      <div class="trust-badge-content">
        <span class="trust-badge-icon">\u2713</span>
        <div class="trust-badge-text">
          <strong>Licensed & Insured</strong>
          <small>NJ HIC #13VH10808800</small>
        </div>
      </div>
    `,document.body.appendChild(e),setTimeout(()=>e.classList.add("show"),100)}addProgressiveCTAs(){const e=[{threshold:0,text:"Get Free Quote",icon:"\u2709"},{threshold:30,text:"See Our Work",icon:"\u{1F5BC}\uFE0F"},{threshold:60,text:"Ready to Start?",icon:"\u{1F680}"},{threshold:90,text:"Let's Talk!",icon:"\u{1F4AC}"}];let t=0;window.addEventListener("scroll",()=>{const o=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;for(let s=e.length-1;s>=0;s--)if(o>=e[s].threshold&&t!==s){t=s,this.updateFABMessage(e[s]);break}},{passive:!0})}updateFABMessage({text:e,icon:t}){const o=document.querySelector(".mobile-fab");if(!o)return;const s=o.querySelector(".fab-icon"),i=o.querySelector(".fab-label");s&&(s.textContent=t),i&&(i.classList.add("updating"),setTimeout(()=>{i.textContent=e,i.classList.remove("updating")},150))}addPremiumTouches(){this.addParallaxEffect(),this.addSoundEffects(),this.addPremiumTransitions(),this.addQualitySignals()}addParallaxEffect(){const e=document.querySelector('.hero, [class*="hero"]');if(!e)return;let t=!1;window.addEventListener("scroll",()=>{t||(window.requestAnimationFrame(()=>{const o=window.scrollY;e.style.transform=`translateY(${o*.5}px)`,t=!1}),t=!0)},{passive:!0})}addSoundEffects(){const e=new(window.AudioContext||window.webkitAudioContext),t=(o,s)=>{const i=e.createOscillator(),a=e.createGain();i.connect(a),a.connect(e.destination),i.frequency.value=o,i.type="sine",a.gain.setValueAtTime(.02,e.currentTime),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+s),i.start(e.currentTime),i.stop(e.currentTime+s)};document.addEventListener("submit",()=>{t(523.25,.1),setTimeout(()=>t(659.25,.1),100),setTimeout(()=>t(783.99,.15),200)}),document.addEventListener("click",o=>{o.target.closest(".mobile-nav-item")&&t(440,.05)})}addPremiumTransitions(){document.body.classList.add("premium-mode");const e={threshold:.1,rootMargin:"0px 0px -100px 0px"},t=new IntersectionObserver(o=>{o.forEach((s,i)=>{s.isIntersecting&&(setTimeout(()=>{s.target.classList.add("premium-fade-in")},i*100),t.unobserve(s.target))})},e);document.querySelectorAll(".card, .service-card, .portfolio-item").forEach(o=>{t.observe(o)})}addQualitySignals(){document.querySelectorAll(".portfolio-item, .gallery-item").forEach(t=>{const o=document.createElement("div");o.className="quality-badge",o.innerHTML="\u2728 TCNA Certified",o.style.opacity="0",t.appendChild(o),t.addEventListener("mouseenter",()=>{o.style.opacity="1"}),t.addEventListener("mouseleave",()=>{o.style.opacity="0"})})}addPlayfulEasterEggs(){this.addKonamiCode(),this.addShakeToSurprise(),this.addLogoEasterEgg()}addKonamiCode(){const e=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];let t=0;document.addEventListener("keydown",o=>{o.key===e[t]?(t++,t===e.length&&(this.activateKonami(),t=0)):t=0})}activateKonami(){const e=document.createElement("div");e.className="konami-message",e.innerHTML=`
      <h2>\u{1F3AE} You found the secret!</h2>
      <p>You're as detail-oriented as we are with tile work! \u{1F3C6}</p>
      <p>Want 5% off? Use code: <strong>KONAMI5</strong></p>
    `,document.body.appendChild(e),this.throwConfetti(),window.haptics&&window.haptics.trigger("notification"),setTimeout(()=>{e.classList.add("show")},100),e.addEventListener("click",()=>{e.classList.remove("show"),setTimeout(()=>e.remove(),300)})}addShakeToSurprise(){if(!window.DeviceMotionEvent)return;let e,t,o,s=0,i;window.addEventListener("devicemotion",a=>{const n=a.accelerationIncludingGravity;if(e!==void 0){const d=Math.abs(n.x-e),l=Math.abs(n.y-t),c=Math.abs(n.z-o);d+l+c>30&&(s++,clearTimeout(i),i=setTimeout(()=>{s=0},1e3),s>=3&&(this.showShakeSurprise(),s=0))}e=n.x,t=n.y,o=n.z})}showShakeSurprise(){const e=[{emoji:"\u{1F3B2}",message:"Whoa! Easy on the device!",cta:"We handle tiles more gently \u{1F604}"},{emoji:"\u{1F32A}\uFE0F",message:"Shake detected!",cta:"Our tile work stays steady even in earthquakes!"},{emoji:"\u{1F3AA}",message:"Fun mode activated!",cta:"Professional work, playful spirit!"}],t=e[Math.floor(Math.random()*e.length)];this.showSuccessToast(`${t.emoji} ${t.message} ${t.cta}`),window.haptics&&window.haptics.trigger("heavy")}addLogoEasterEgg(){const e=document.querySelector("[data-logo], .site-logo, .logo");if(!e)return;let t=0,o;e.addEventListener("click",s=>{s.preventDefault(),t++,clearTimeout(o),t===3?(this.activateLogoAnimation(),t=0):o=setTimeout(()=>{t=0},500)})}activateLogoAnimation(){const e=document.querySelector("[data-logo], .site-logo, .logo");e&&(e.classList.add("logo-party"),window.haptics&&window.haptics.trigger("success"),setTimeout(()=>{e.classList.remove("logo-party")},2e3))}showSuccessToast(e){const t=document.createElement("div");t.className="pwa-toast success-toast",t.textContent=e,document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),100),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},4e3)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.mobilePersonality=new r}):window.mobilePersonality=new r;var u=r;})();
