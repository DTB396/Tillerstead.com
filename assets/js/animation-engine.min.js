(()=>{(function(){"use strict";const l={scrollThreshold:.15,defaultDuration:600,staggerDelay:100,magneticStrength:.3,magneticRadius:100,tiltMaxAngle:8,tiltPerspective:1e3,debug:!1},u=(s,t,e)=>s+(t-s)*e,E=(s,t,e)=>Math.min(Math.max(s,t),e),D=s=>{const t=s.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}},d=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,y=s=>{const{from:t,to:e,duration:n=l.defaultDuration,easing:r=h,onUpdate:o,onComplete:i}=s,a=performance.now(),c=m=>{const g=m-a,p=Math.min(g/n,1),b=r(p),x={};for(const f in t)x[f]=u(t[f],e[f],b);o(x),p<1?requestAnimationFrame(c):i&&i()};requestAnimationFrame(c)},h=s=>1-Math.pow(1-s,5),w=s=>s===1?1:1-Math.pow(2,-10*s),A=s=>1+2.70158*Math.pow(s-1,3)+1.70158*Math.pow(s-1,2),S=s=>s<.5?16*s*s*s*s*s:1-Math.pow(-2*s+2,5)/2;class T{constructor(){this.observer=null,this.init()}init(){if(d()){document.querySelectorAll(".animate-on-scroll, .scroll-fade-in, .scroll-scale-in, .scroll-slide-left, .scroll-slide-right, .stagger-children").forEach(t=>t.classList.add("is-visible"));return}this.observer=new IntersectionObserver(t=>this.handleIntersection(t),{threshold:l.scrollThreshold,rootMargin:"0px 0px -50px 0px"}),this.observeElements()}observeElements(){const t=[".animate-on-scroll",".scroll-fade-in",".scroll-scale-in",".scroll-slide-left",".scroll-slide-right",".stagger-children","[data-animate]"];document.querySelectorAll(t.join(", ")).forEach(e=>{this.observer.observe(e)})}handleIntersection(t){t.forEach(e=>{if(e.isIntersecting){const n=e.target;n.classList.add("is-visible");const r=n.dataset.animate;r&&n.classList.add(`animate-${r}`),this.observer.unobserve(n)}})}observe(t){this.observer&&t&&this.observer.observe(t)}}class Y{constructor(){this.elements=[],this.init()}init(){d()||document.querySelectorAll("[data-magnetic]").forEach(t=>{this.setupElement(t)})}setupElement(t){const e={el:t,x:0,y:0,targetX:0,targetY:0,isHovering:!1};this.elements.push(e),t.addEventListener("mouseenter",()=>{e.isHovering=!0}),t.addEventListener("mouseleave",()=>{e.isHovering=!1,e.targetX=0,e.targetY=0}),t.addEventListener("mousemove",n=>{if(!e.isHovering)return;const r=t.getBoundingClientRect(),o=r.left+r.width/2,i=r.top+r.height/2,a=n.clientX-o,c=n.clientY-i;e.targetX=a*l.magneticStrength,e.targetY=c*l.magneticStrength}),this.animate(e)}animate(t){const e=()=>{t.x=u(t.x,t.targetX,.1),t.y=u(t.y,t.targetY,.1),t.el.style.setProperty("--magnetic-x",`${t.x}px`),t.el.style.setProperty("--magnetic-y",`${t.y}px`),requestAnimationFrame(e)};e()}}class C{constructor(){this.init()}init(){d()||document.querySelectorAll("[data-tilt]").forEach(t=>{this.setupElement(t)})}setupElement(t){let e=0,n=0,r=0,o=0;t.addEventListener("mouseenter",()=>{t.style.transition="none"}),t.addEventListener("mousemove",a=>{const c=t.getBoundingClientRect(),m=c.left+c.width/2,g=c.top+c.height/2,p=(a.clientX-m)/(c.width/2);e=(a.clientY-g)/(c.height/2)*l.tiltMaxAngle*-1,n=p*l.tiltMaxAngle}),t.addEventListener("mouseleave",()=>{e=0,n=0,t.style.transition="transform 0.5s cubic-bezier(0.22, 1, 0.36, 1)"});const i=()=>{r=u(r,e,.1),o=u(o,n,.1),t.style.setProperty("--tilt-x",`${r}deg`),t.style.setProperty("--tilt-y",`${o}deg`),t.style.transform=`perspective(${l.tiltPerspective}px) rotateX(${r}deg) rotateY(${o}deg)`,requestAnimationFrame(i)};i()}}class ${constructor(){this.init()}init(){d()||document.querySelectorAll(".card-spotlight").forEach(t=>{this.setupElement(t)})}setupElement(t){t.addEventListener("mousemove",e=>{const n=t.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;t.style.setProperty("--mouse-x",`${r}px`),t.style.setProperty("--mouse-y",`${o}px`)})}}class q{constructor(){this.observer=null,this.init()}init(){if(d()){document.querySelectorAll("[data-count-to]").forEach(t=>{t.textContent=t.dataset.countTo});return}this.observer=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(this.animateCounter(e.target),this.observer.unobserve(e.target))})},{threshold:.5}),document.querySelectorAll("[data-count-to]").forEach(t=>{this.observer.observe(t)})}animateCounter(t){const e=parseInt(t.dataset.countTo,10),n=parseInt(t.dataset.countDuration,10)||2e3,r=t.dataset.countSuffix||"",o=t.dataset.countPrefix||"";y({from:{value:0},to:{value:e},duration:n,easing:h,onUpdate:({value:i})=>{t.textContent=`${o}${Math.round(i)}${r}`}})}}class L{constructor(){this.observer=null,this.init()}init(){d()||(document.querySelectorAll("[data-split-text]").forEach(t=>{this.splitText(t)}),this.observer=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(this.animateText(e.target),this.observer.unobserve(e.target))})},{threshold:.3}),document.querySelectorAll("[data-split-text]").forEach(t=>{this.observer.observe(t)}))}splitText(t){const e=t.textContent;if((t.dataset.splitText||"chars")==="words"){const r=e.split(" ");t.textContent="",r.forEach((o,i)=>{const a=document.createElement("span");a.className="word",a.style.transitionDelay=`${i*30}ms`,a.textContent=o,t.appendChild(a),i<r.length-1&&t.appendChild(document.createTextNode(" "))})}}animateText(t){t.classList.add("split-animate")}}class I{constructor(){this.init()}init(){d()||document.querySelectorAll(".ripple-effect").forEach(t=>{t.addEventListener("click",e=>this.createRipple(e,t))})}createRipple(t,e){const n=e.getBoundingClientRect(),r=t.clientX-n.left,o=t.clientY-n.top,i=document.createElement("span");i.className="ripple",i.style.cssText=`
        position: absolute;
        left: ${r}px;
        top: ${o}px;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.4);
        transform: translate(-50%, -50%);
        pointer-events: none;
        animation: ripple-expand 0.6s cubic-bezier(0, 0, 0.2, 1);
      `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(i),i.addEventListener("animationend",()=>i.remove())}}class M{constructor(){this.elements=[],this.init()}init(){d()||document.querySelectorAll("[data-reveal]").forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(30px)",setTimeout(()=>{t.style.transition="opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1), transform 0.8s cubic-bezier(0.22, 1, 0.36, 1)",t.style.opacity="1",t.style.transform="translateY(0)"},e*l.staggerDelay+100)})}}class X{constructor(){this.progressBar=null,this.init()}init(){this.progressBar=document.querySelector("[data-scroll-progress]"),this.progressBar&&(this.progressBar.style.transformOrigin="left",this.progressBar.style.transform="scaleX(0)",window.addEventListener("scroll",()=>this.updateProgress(),{passive:!0}))}updateProgress(){const t=window.scrollY,e=document.documentElement.scrollHeight-window.innerHeight,n=t/e;this.progressBar.style.transform=`scaleX(${n})`}}class P{constructor(){this.elements=[],this.init()}init(){d()||(document.querySelectorAll("[data-parallax]").forEach(t=>{const e=parseFloat(t.dataset.parallax)||.5;this.elements.push({el:t,speed:e})}),this.elements.length>0&&window.addEventListener("scroll",()=>this.update(),{passive:!0}))}update(){const t=window.scrollY;this.elements.forEach(({el:e,speed:n})=>{const r=e.getBoundingClientRect(),i=r.top+t+r.height/2,a=t+window.innerHeight/2,m=(i-a)*n*-1;e.style.transform=`translateY(${m}px)`})}}const v=(s,t={})=>{const{delay:e=l.staggerDelay,animation:n="fade-in-up",duration:r=l.defaultDuration}=t;document.querySelectorAll(s).forEach((i,a)=>{i.style.animationDelay=`${a*e}ms`,i.style.animationDuration=`${r}ms`,i.classList.add(`animate-${n}`)})};class B{constructor(){this.modules={},this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){this.decorateDom(),this.modules.scroll=new T,this.modules.magnetic=new Y,this.modules.tilt=new C,this.modules.spotlight=new $,this.modules.counter=new q,this.modules.splitText=new L,this.modules.reveal=new M,this.modules.progress=new X,this.modules.parallax=new P}decorateDom(){document.querySelectorAll("a.btn, button.btn, input.btn").forEach(t=>{t.hasAttribute("data-button-premium")||t.setAttribute("data-button-premium",""),t.hasAttribute("data-magnetic")||t.setAttribute("data-magnetic",""),t.classList.add("ripple-effect")}),document.querySelectorAll(".ts-card, .card--post, .service-card, .plan-card, .testimonial-card, .card--review").forEach(t=>{t.hasAttribute("data-card-premium")||t.setAttribute("data-card-premium",""),t.classList.add("card-spotlight")}),this.injectStyles(),l.debug&&console.log("\u2728 Tillerstead Animation Engine initialized")}injectStyles(){const t=document.createElement("style");t.textContent=`
        @keyframes ripple-expand {
          to {
            width: 400px;
            height: 400px;
            opacity: 0;
          }
        }

        .split-char, .split-word {
          display: inline-block;
          opacity: 0;
          transform: translateY(100%);
        }

        .split-animate .split-char,
        .split-animate .split-word {
          animation: split-reveal 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes split-reveal {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `,document.head.appendChild(t)}observe(t){this.modules.scroll&&this.modules.scroll.observe(t)}stagger(t,e){v(t,e)}}window.TillersteadAnimations=new B,window.TillersteadAnimations.utils={lerp:u,clamp:E,animate:y,easeOutQuint:h,easeOutExpo:w,easeOutBack:A,easeInOutQuint:S,staggerElements:v}})();})();
