(()=>{class l{constructor(){this.init()}init(){this.isMobile()&&(this.initBottomNav(),this.initFAB(),this.initPullToRefresh(),this.initAppShell())}isMobile(){return window.matchMedia("(max-width: 768px)").matches||"ontouchstart"in window}initBottomNav(){const e=document.createElement("nav");e.className="mobile-bottom-nav",e.setAttribute("role","navigation"),e.setAttribute("aria-label","Mobile bottom navigation");const s=window.location.pathname;[{href:"/",icon:"home",label:"Home"},{href:"/tools/",icon:"calculator",label:"Tools"},{href:"/portfolio/",icon:"gallery",label:"Portfolio"},{href:"/contact/",icon:"message",label:"Contact"}].forEach(n=>{const a=document.createElement("a");a.href=n.href,a.className="mobile-nav-item",a.setAttribute("aria-label",n.label),(s===n.href||s.startsWith(n.href.replace("/","")))&&(a.classList.add("active"),a.setAttribute("aria-current","page")),a.innerHTML=`
        <span class="mobile-nav-icon" data-icon="${n.icon}" aria-hidden="true"></span>
        <span class="mobile-nav-label">${n.label}</span>
      `,a.addEventListener("click",()=>{this.hapticFeedback("light")}),e.appendChild(a)}),document.body.appendChild(e),document.body.classList.add("has-bottom-nav")}initFAB(){if(window.location.pathname.includes("/contact"))return;const e=document.createElement("button");e.className="mobile-fab",e.setAttribute("aria-label","Get a free quote"),e.innerHTML=`
      <span class="fab-icon" aria-hidden="true">\u2709</span>
      <span class="fab-label">Get Quote</span>
    `,e.addEventListener("click",n=>{n.preventDefault(),this.hapticFeedback("medium"),window.location.href="/contact/"});let s=window.scrollY,t=!1;window.addEventListener("scroll",()=>{t||(window.requestAnimationFrame(()=>{const n=window.scrollY;n>s&&n>100?e.classList.add("fab-hidden"):e.classList.remove("fab-hidden"),s=n,t=!1}),t=!0)}),document.body.appendChild(e)}initPullToRefresh(){let e=0,s=!1;const t=80,n=120,a=document.createElement("div");a.className="pull-refresh-indicator",a.innerHTML=`
      <div class="refresh-spinner" role="status" aria-live="polite">
        <span class="visually-hidden">Pull to refresh</span>
      </div>
    `,document.body.insertBefore(a,document.body.firstChild);const r=()=>window.scrollY===0&&!document.body.classList.contains("refreshing");document.addEventListener("touchstart",i=>{r()&&(e=i.touches[0].clientY)},{passive:!0}),document.addEventListener("touchmove",i=>{if(!r())return;const c=i.touches[0].clientY,o=Math.min(c-e,n);o>0&&(s=!0,a.style.transform=`translateY(${o}px)`,a.style.opacity=o/t,o>=t?a.classList.add("ready"):a.classList.remove("ready"))},{passive:!0}),document.addEventListener("touchend",()=>{s&&((parseFloat(a.style.transform.replace(/[^\d.]/g,""))||0)>=t?this.performRefresh(a):this.resetRefresh(a),s=!1)},{passive:!0})}performRefresh(e){document.body.classList.add("refreshing"),e.classList.add("refreshing"),this.hapticFeedback("medium"),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"REFRESH_CACHE"}),setTimeout(()=>{window.location.reload()},800)}resetRefresh(e){e.style.transform="",e.style.opacity="",e.classList.remove("ready")}initAppShell(){document.querySelectorAll('img[loading="lazy"]').forEach(s=>{const t=document.createElement("div");t.className="skeleton-img-wrapper",s.parentNode.insertBefore(t,s),t.appendChild(s),s.addEventListener("load",()=>{t.classList.add("loaded")})}),document.addEventListener("click",s=>{const t=s.target.closest("a");t&&t.href&&!t.target&&!t.download&&t.hostname===window.location.hostname&&(!t.hash||t.pathname!==window.location.pathname)&&this.showPageTransition()})}showPageTransition(){const e=document.createElement("div");e.className="page-transition-overlay",e.innerHTML=`
      <div class="page-transition-spinner">
        <div class="dot-loader">
          <span></span><span></span><span></span>
        </div>
      </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&(e.classList.add("fade-out"),setTimeout(()=>e.remove(),300))},5e3)}hapticFeedback(e="light"){if("vibrate"in navigator){const s={light:10,medium:20,heavy:30};navigator.vibrate(s[e]||10)}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{new l}):new l;var h=l;})();
