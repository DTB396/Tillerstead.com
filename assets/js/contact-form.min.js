(()=>{(function(){"use strict";const m=t=>{const e=encodeURIComponent("Tillerstead Project Inquiry \u2013 TCNA/New Jersey HIC Compliant"),o=[];t.forEach((n,s)=>{if(s==="form-name"||s==="bot-field"||s==="_trap"||/^_|trap/i.test(s))return;const d=String(n).replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n/g,`\r
`);o.push(`${s}: ${d}`)});const r=encodeURIComponent(o.join(`\r
\r
`));return`mailto:info@tillerstead.com?subject=${e}&body=${r}`},c=(t,e,o="success")=>{t&&(t.textContent=e,t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.classList.remove("sr-only","has-error","ts-form-error","ts-form-success"),o==="error"?t.classList.add("ts-form-error"):t.classList.add("ts-form-success"))},p=t=>{const e=new FormData(t);return!e.get("form-name")&&t.getAttribute("name")&&e.append("form-name",t.getAttribute("name")),{data:e,encoded:new URLSearchParams(e).toString()}},f=t=>{const e=[];return t.querySelectorAll("[required]").forEach(o=>{var r;if(!o.value.trim()){const n=((r=t.querySelector(`label[for="${o.id}"]`))==null?void 0:r.textContent)||o.getAttribute("aria-label")||o.name||"This field";e.push(`${n} is required.`)}}),e};document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("form[data-contact-form]");t.length&&t.forEach(e=>{e.addEventListener("submit",async o=>{o.preventDefault();const r=e.querySelector('button[type="submit"], input[type="submit"]');r==null||r.setAttribute("disabled","true");const n=e.querySelector("[data-form-status]")||document.getElementById("form-status"),s=f(e);if(s.length){c(n,s.join(" "),"error"),r==null||r.removeAttribute("disabled");return}const{data:d,encoded:b}=p(e),h=m(d),a=(e.getAttribute("action")||"").trim(),y=a&&a!=="#"&&!a.startsWith("mailto:");let l=!1;if(y)try{const i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b});if(!i.ok)throw new Error(`Status ${i.status}`);l=!0,c(n,"Your request has been received. Tillerstead adheres to TCNA and New Jersey HIC standards\u2014expect a detailed, expert reply within 1 business day.","success"),e.reset();const u=new FormData(e).get("_next");u&&setTimeout(()=>{window.location.href=u},250)}catch(i){console.error("Form submission failed; falling back to mailto:",i)}l||(c(n,"We\u2019ve opened your email app with your project details. If your email client did not open, please contact info@tillerstead.com directly. All inquiries are handled per TCNA and New Jersey HIC requirements.","success"),setTimeout(()=>{window.location.href=h},500)),r==null||r.removeAttribute("disabled")})})})})();})();
