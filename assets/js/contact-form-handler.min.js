(()=>{(function(){"use strict";const n={formSelector:'form[name="contact"]',endpoint:"/.netlify/functions/contact",successMessage:{title:"Message Sent Successfully!",body:"Thank you for contacting Tillerstead. We've received your inquiry and will respond within 48 hours. If you don't hear from us, please text us at (609) 862-8808 to confirm we received your message.",confirmationSent:"A confirmation email has been sent to your address."},errorMessage:{title:"Submission Error",body:"We apologize, but there was an issue sending your message. Please email us directly at info@tillerstead.com or call (609) 862-8808."}};function c(e,o,r,t=""){const s=document.createElement("div");return s.className=`form-message form-message--${e}`,s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),s.innerHTML=`
      <div class="form-message__content">
        <h3 class="form-message__title">${o}</h3>
        <p class="form-message__body">${r}</p>
        ${t?`<p class="form-message__extra">${t}</p>`:""}
        <button type="button" class="form-message__close" aria-label="Close message">\xD7</button>
      </div>
    `,s.querySelector(".form-message__close").addEventListener("click",()=>{s.remove()}),s}function d(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function u(e){var t,s;const o=[];(t=e.get("name"))!=null&&t.trim()||o.push("Name is required");const r=e.get("email");return r!=null&&r.trim()?d(r)||o.push("Please enter a valid email address"):o.push("Email is required"),(s=e.get("message"))!=null&&s.trim()||o.push("Project details are required"),o}async function f(e){try{if((await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()})).ok)return{success:!0,method:"netlify"}}catch(s){console.warn("Netlify Forms failed, trying mailto fallback:",s)}const o=`Contact Form: ${e.get("name")}`,r=`
Name: ${e.get("name")}
Email: ${e.get("email")}
Phone: ${e.get("phone")||"Not provided"}

Message:
${e.get("message")}

Submitted: ${new Date().toLocaleString()}
    `.trim();try{if((await fetch("https://formspree.io/f/YOUR_FORM_ID",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.get("name"),email:e.get("email"),phone:e.get("phone"),message:e.get("message"),_subject:o,_replyto:e.get("email")})})).ok)return{success:!0,method:"formspree"}}catch(s){console.warn("Formspree failed:",s)}const t=`mailto:info@tillerstead.com?subject=${encodeURIComponent(o)}&body=${encodeURIComponent(r)}`;return window.location.href=t,{success:!0,method:"mailto"}}function l(){const e=document.querySelector(n.formSelector);if(e&&(e.addEventListener("submit",async o=>{o.preventDefault(),document.querySelectorAll(".form-message").forEach(i=>i.remove());const r=new FormData(e),t=e.querySelector('button[type="submit"]'),s=t==null?void 0:t.textContent,m=u(r);if(m.length>0){const i=c("error","Please Fix These Errors",m.join(". "));e.insertBefore(i,e.firstChild);return}t&&(t.disabled=!0,t.textContent="Sending...");try{if((await f(r)).success){const a=c("success",n.successMessage.title,n.successMessage.body,n.successMessage.confirmationSent);e.insertBefore(a,e.firstChild),e.reset(),a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{window.location.pathname!=="/success/"&&(window.location.href="/success/")},3e3)}}catch(i){console.error("Form submission error:",i);const a=c("error",n.errorMessage.title,n.errorMessage.body);e.insertBefore(a,e.firstChild),a.scrollIntoView({behavior:"smooth",block:"center"})}finally{t&&(t.disabled=!1,t.textContent=s)}}),!document.querySelector("#form-handler-styles"))){const o=document.createElement("style");o.id="form-handler-styles",o.textContent=`
        .form-message {
          padding: 1.5rem;
          border-radius: var(--ts-radius-md, 8px);
          margin-bottom: 1.5rem;
          position: relative;
          animation: slideIn 0.3s ease-out;
        }

        .form-message--success {
          background: var(--ts-color-success-soft, #d4edda);
          border: 2px solid var(--ts-color-success, #28a745);
          color: var(--ts-color-success-strong, #155724);
        }

        .form-message--error {
          background: var(--ts-color-error-soft, #f8d7da);
          border: 2px solid var(--ts-color-error, #dc3545);
          color: var(--ts-color-error-strong, #721c24);
        }

        .form-message__title {
          margin: 0 0 0.5rem;
          font-size: 1.25rem;
          font-weight: 700;
        }

        .form-message__body {
          margin: 0 0 0.5rem;
          line-height: 1.6;
        }

        .form-message__extra {
          margin: 0;
          font-size: 0.9rem;
          opacity: 0.9;
        }

        .form-message__close {
          position: absolute;
          top: 1rem;
          right: 1rem;
          background: transparent;
          border: none;
          font-size: 1.5rem;
          line-height: 1;
          cursor: pointer;
          opacity: 0.6;
          transition: opacity 0.2s;
        }

        .form-message__close:hover {
          opacity: 1;
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        button[type="submit"]:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
      `,document.head.appendChild(o)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})();})();
