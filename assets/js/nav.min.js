(()=>{(()=>{var G;const p=(e,t=document)=>t.querySelector(e),v=(e,t=document)=>Array.from(t.querySelectorAll(e)),s=p(".site-header"),l=p(".nav-toggle"),i=s==null?void 0:s.querySelector("[data-nav-container]"),o=s==null?void 0:s.querySelector("#mobile-nav"),k=s==null?void 0:s.querySelector("[data-nav-close]"),a=s==null?void 0:s.querySelector("[data-nav-overlay]"),x=1080;let D=null;const r=()=>window.innerWidth<x,u=()=>i==null?void 0:i.classList.contains("is-open");console.log("[DEBUG] Adding aria and mobile view logging");const E=e=>{const t=e?"true":"false";console.log(`[DEBUG] syncAria called with state: ${t}`),console.log("[DEBUG] navToggle:",l),console.log("[DEBUG] nav:",o),console.log("[DEBUG] navShell:",i),console.log("[DEBUG] navOverlay:",a),l==null||l.setAttribute("aria-expanded",t),l==null||l.setAttribute("aria-label",e?"Close navigation menu":"Open navigation menu"),o==null||o.setAttribute("aria-expanded",t),o&&(o.dataset.open=t),i&&(i.dataset.open=t),a&&(a.dataset.open=t)},h=e=>{u()&&(e.key==="Escape"||e.key==="Esc")&&(e.preventDefault(),d())},A=e=>{if(!u()||e.key!=="Tab"||!o)return;const t=v('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"])',o).filter(m=>m.offsetParent!==null);if(!t.length)return;const n=t[0],c=t[t.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),c.focus()):!e.shiftKey&&document.activeElement===c&&(e.preventDefault(),n.focus())},y=()=>{console.log("[TEST] openNav called",{navShell:i,nav:o,navOverlay:a}),!(!i||!o)&&(D=document.activeElement,i.classList.add("is-open"),o.classList.add("is-open"),a&&a.classList.add("is-open"),document.body.classList.add("nav-open"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),E(!0),setTimeout(()=>{const e=p("button, a",o)||o;e&&typeof e.focus=="function"&&e.focus()},50),document.addEventListener("keydown",A),document.addEventListener("keydown",h))},d=()=>{if(!i||!o)return;i.classList.remove("is-open"),o.classList.remove("is-open"),a&&a.classList.remove("is-open"),document.body.classList.remove("nav-open"),document.body.style.overflow="",document.documentElement.style.overflow="",window.scrollTo(0,0),E(!1),document.removeEventListener("keydown",A),document.removeEventListener("keydown",h);const e=D||l||document.body;requestAnimationFrame(()=>{e&&typeof e.focus=="function"&&e.focus()})};if(console.log("[DEBUG] Attaching event listeners"),l&&(console.log("[DEBUG] navToggle event listener attached"),l.addEventListener("click",e=>{e.stopPropagation(),u()?d():y()})),k&&(console.log("[DEBUG] navClose event listener attached"),k.addEventListener("click",e=>{e.stopPropagation(),d()})),a){console.log("[DEBUG] navOverlay event listeners attached");const e=t=>{t.stopPropagation(),d()};a.addEventListener("click",e),a.addEventListener("touchstart",e,{passive:!0})}o&&(console.log("[DEBUG] nav link click listener attached"),o.addEventListener("click",e=>{e.target.closest("a")&&r()&&u()&&d()}));const S=v("[data-mobile-subtoggle]");S.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.closest(".mobile-nav-item--section"),c=n==null?void 0:n.querySelector("[data-mobile-submenu]");if(!c)return;const m=e.getAttribute("aria-expanded")==="true";S.forEach(b=>{var U;if(b!==e){b.setAttribute("aria-expanded","false");const g=(U=b.closest(".mobile-nav-item--section"))==null?void 0:U.querySelector("[data-mobile-submenu]");g==null||g.classList.remove("is-open")}}),e.setAttribute("aria-expanded",m?"false":"true"),c.classList.toggle("is-open",!m)})});const O=v("[data-dropdown-toggle]");let w=null;const f=()=>{v(".nav-item.has-children.is-open").forEach(e=>{e.classList.remove("is-open");const t=e.querySelector("[data-dropdown-toggle]");t==null||t.setAttribute("aria-expanded","false")}),w=null};O.forEach(e=>{e.addEventListener("click",t=>{if(r())return;t.preventDefault();const n=e.closest(".nav-item.has-children"),c=n==null?void 0:n.classList.contains("is-open");f(),!c&&n&&(n.classList.add("is-open"),e.setAttribute("aria-expanded","true"),w=n)}),e.addEventListener("keydown",t=>{r()||((t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e.click()),t.key==="Escape"&&(f(),e.focus()))})}),document.addEventListener("click",e=>{e.target.closest(".nav-item.has-children")||f()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&w&&f()});const N=v(".nav-item--mega");let T;N.forEach(e=>{e.addEventListener("mouseenter",()=>{r()||(clearTimeout(T),e.classList.add("is-open"))}),e.addEventListener("mouseleave",()=>{r()||(T=setTimeout(()=>{e.classList.remove("is-open")},150))});const t=e.querySelector(".nav-link");t==null||t.addEventListener("keydown",n=>{if(!r()&&n.key!=="Enter"&&(n.key==="ArrowDown"||n.key===" ")){n.preventDefault(),e.classList.add("is-open");const c=e.querySelector(".nav-mega-link");c==null||c.focus()}}),e.addEventListener("keydown",n=>{n.key==="Escape"&&(e.classList.remove("is-open"),t==null||t.focus())})});let P=0,L=!1;const q=()=>{const e=window.scrollY;e>50?s==null||s.classList.add("is-scrolled"):s==null||s.classList.remove("is-scrolled"),P=e,L=!1};window.addEventListener("scroll",()=>{L||(requestAnimationFrame(q),L=!0)},{passive:!0});let B;window.addEventListener("resize",()=>{clearTimeout(B),B=setTimeout(()=>{!r()&&u()&&d(),r()||f()},120)}),"onorientationchange"in window&&window.addEventListener("orientationchange",()=>{!r()&&u()&&setTimeout(d,200)});try{i&&o&&(i.classList.remove("is-open"),o.classList.remove("is-open"),document.body.classList.remove("nav-open"),E(!1)),q()}catch(e){(G=window==null?void 0:window.console)!=null&&G.warn&&console.warn("Navigation initialization error:",e)}window.tsOpenNav=y,window.tsCloseNav=d,window.tsToggleNav=()=>u()?d():y()})();})();
