(()=>{(function(){"use strict";const i=document.querySelector('.contact-form, form[action*="contact"]');if(!i)return;const n={required:e=>e.trim().length>0,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),phone:e=>e.replace(/\D/g,"").length>=10,minLength:(e,a)=>e.trim().length>=a,maxLength:(e,a)=>e.trim().length<=a},l={required:"This field is required",email:"Please enter a valid email address",phone:"Please enter a valid phone number (10+ digits)",minLength:e=>`Please enter at least ${e} characters`,maxLength:e=>`Please enter no more than ${e} characters`};function d(e){const a=e.value,t=e.dataset.validate?e.dataset.validate.split(","):[];let s=!0,r="";if(e.required&&!n.required(a)&&(s=!1,r=l.required),s&&a.trim()){const o=e.type;o==="email"&&!n.email(a)?(s=!1,r=l.email):o==="tel"&&!n.phone(a)&&(s=!1,r=l.phone),t.forEach(c=>{const[f,h]=c.split(":");n[f]&&!n[f](a,h)&&(s=!1,r=l[f](h))})}return g(e,s,r),s}function g(e,a,t){const s=e.closest(".form-group, .form-field");a?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),s==null||s.classList.remove("has-error"),s==null||s.classList.add("has-success"),u(e)):(e.classList.remove("is-valid"),e.classList.add("is-invalid"),s==null||s.classList.remove("has-success"),s==null||s.classList.add("has-error"),b(e,t))}function b(e,a){u(e);const t=document.createElement("span");t.className="field-error",t.setAttribute("role","alert"),t.textContent=a,t.id="error-"+(e.id||e.name);const s=e.closest(".form-group, .form-field");s?s.appendChild(t):e.parentNode.appendChild(t),e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",t.id)}function u(e){const a=e.closest(".form-group, .form-field"),t=(a==null?void 0:a.querySelector(".field-error"))||e.parentNode.querySelector(".field-error");t&&t.remove(),e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby")}function L(e){const a=e.maxLength;if(a===-1)return;const t=document.createElement("div");t.className="character-counter",t.setAttribute("aria-live","polite");const s=()=>{const r=a-e.value.length;t.textContent=`${r} characters remaining`,t.classList.toggle("warning",r<50)};e.addEventListener("input",s),e.parentNode.appendChild(t),s()}function v(e,a="success"){const t=document.createElement("div");t.className=`notification notification--${a}`,t.setAttribute("role","status"),t.setAttribute("aria-live","polite");const s=document.createElement("p");s.textContent=e,t.appendChild(s),document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("is-visible")}),setTimeout(()=>{t.classList.remove("is-visible"),setTimeout(()=>t.remove(),300)},5e3)}const m=i.querySelectorAll("input, textarea, select");m.forEach(e=>{e.addEventListener("blur",()=>{e.value.trim()&&d(e)}),e.addEventListener("input",()=>{e.classList.contains("is-invalid")&&d(e)}),e.tagName==="TEXTAREA"&&L(e)}),i.addEventListener("submit",async e=>{e.preventDefault();let a=!0;if(m.forEach(r=>{(r.required||r.value.trim())&&(d(r)||(a=!1))}),!a){const r=i.querySelector(".is-invalid");r&&r.focus();return}const t=i.querySelector('[type="submit"]'),s=t.textContent;t.disabled=!0,t.classList.add("btn-loading"),t.textContent="Sending...";try{const r=new FormData(i);await new Promise(o=>setTimeout(o,1500)),t.classList.remove("btn-loading"),t.classList.add("btn-success"),t.textContent="Sent!",v("Message sent successfully! We'll get back to you soon.","success"),setTimeout(()=>{i.reset(),m.forEach(o=>{var c;o.classList.remove("is-valid","is-invalid"),(c=o.closest(".form-group, .field"))==null||c.classList.remove("has-success","has-error")}),t.classList.remove("btn-success"),t.disabled=!1,t.textContent=s},2e3)}catch(r){t.classList.remove("btn-loading"),t.disabled=!1,t.textContent=s,v("Failed to send message. Please try again or call us directly.","error"),console.error("Form submission error:",r)}})})();})();
