(()=>{(function(){const a=(e,t=document)=>t.querySelector(e),g=(e,t=document)=>Array.from(t.querySelectorAll(e)),C="{{ '/assets/img/' | relative_url }}",S="{{ '' | relative_url }}";function m(e){return e?/^https?:\/\//i.test(e)?e:e.startsWith("/")?S+e:C+e:""}const i=a("#gallery-slider"),d=a("#slide-image"),b=a("#slide-caption-text"),v=a("#slide-meta"),u=a("#slider-dots"),_=a(".slider-arrow.prev"),R=a(".slider-arrow.next"),E=g(".chip"),L={all:"All work",showers:"Showers & Wet Areas",backsplashes:"Backsplashes",floors:"Floors & Large-Format Tile",remodels:"Remodels & Full Bath Scopes",repairs:"Repairs & Code Corrections"};let n="all",s=[],r=0,c=null;const T=3200;function F(){E.forEach(e=>{const t=e.dataset.filter===n;e.classList.toggle("is-active",t),e.setAttribute("aria-selected",t?"true":"false")})}function I(){u.innerHTML="",s.forEach((e,t)=>{const l=document.createElement("button");l.type="button",l.className="slider-dot",l.dataset.index=t,l.setAttribute("aria-label",`Go to slide ${t+1}`),l.addEventListener("click",()=>{f(t),o()}),u.appendChild(l)})}function P(){if(!s.length)return;const e=(r+1)%s.length,t=s[e];if(t&&t.file){const l=new window.Image;l.src=m(t.file)}}function f(e){if(!s.length)return;r=(e+s.length)%s.length;const t=s[r],l=document.getElementById("slide-source-webp"),B=!!t.file_webp;l&&(B?l.srcset=m(t.file_webp):l.removeAttribute("srcset")),d.src=m(t.file),d.alt=t.alt||"Project photo by Tillerstead LLC, installed per TCNA/New Jersey HIC standards.",b.textContent=t.caption||"",v.textContent=`${L[n]||"All work"} \xB7 ${r+1} of ${s.length}`,g(".slider-dot",u).forEach(k=>{k.classList.toggle("is-active",Number(k.dataset.index)===r)}),P()}function h(){f(r+1)}function A(){f(r-1)}function p(){c||s.length<=1||(c=setInterval(h,T))}function w(){c&&(clearInterval(c),c=null)}function o(){w(),p()}function y(){const e=new URL(window.location);n==="all"?e.searchParams.delete("filter"):e.searchParams.set("filter",n),history.replaceState(null,"",e)}function x(e){if(n=e||"all",s=n==="all"?PROJECTS.slice():PROJECTS.filter(t=>(t.tags||[]).includes(n)),F(),!s.length){i.setAttribute("aria-busy","true"),d.src="{{ fallback_src }}",d.alt="{{ fallback_alt | escape }}",b.textContent="{{ fallback_caption }}",v.textContent=L[n]||"All work",u.innerHTML="",w(),y();return}i.removeAttribute("aria-busy"),r=0,I(),f(0),o(),y()}R.addEventListener("click",()=>{h(),o()}),_.addEventListener("click",()=>{A(),o()}),i.addEventListener("mouseenter",w),i.addEventListener("mouseleave",p),i.addEventListener("focusin",w),i.addEventListener("focusout",p),window.addEventListener("keydown",e=>{e.key==="ArrowRight"?(h(),o()):e.key==="ArrowLeft"&&(A(),o())}),E.forEach(e=>{e.dataset.filter||(e.dataset.filter=(e.textContent||"").toLowerCase()),e.addEventListener("click",()=>x(e.dataset.filter))});const $=new URL(window.location).searchParams.get("filter")||(window.location.hash||"").replace("#","")||"all";x($)})();})();
