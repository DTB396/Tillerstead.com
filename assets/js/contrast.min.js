(()=>{(function(){"use strict";function f(o){const a=document.createElement("canvas").getContext("2d");a.fillStyle=o;const e=a.fillStyle;if(e.startsWith("#")){let n=e.slice(1);n.length===3&&(n=n.split("").map(c=>c+c).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,r&255]}const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return t?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:[255,255,255]}function d([o,a,e]){const t=[o,a,e].map(n=>(n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)));return .2126*t[0]+.7152*t[1]+.0722*t[2]}function p(o,a){const e=d(o),t=d(a);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}function i(){document.querySelectorAll(".c-contrast").forEach(o=>{let a=window.getComputedStyle(o).backgroundColor,e=o;for(;(a==="rgba(0, 0, 0, 0)"||a==="transparent")&&e.parentElement;)e=e.parentElement,a=window.getComputedStyle(e).backgroundColor;const t=f(a),n=[0,0,0],r=[255,255,255],c=p(t,n),s=p(t,r);let u,l;c>=4.5&&c>=s?(u=n,l="#000"):s>=4.5?(u=r,l="#fff"):(u=c>s?n:r,l=c>s?"#000":"#fff"),o.style.color=l,o.setAttribute("data-contrast-applied","true"),o.setAttribute("aria-label","High-contrast text for accessibility compliance")})}window.applyContrast=i,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i,{once:!0}):i()})();})();
